# DocFlow - 初期要件定義

## プロジェクト概要

### コンセプト
AIの仕事での活用を進めるためには、データをAIフレンドリーな形で保存する必要がある。DocFlowは、紙の文書やPDF、画像をAIが処理しやすいマークダウン形式に変換し、その過程を効率的に支援するデスクトップアプリケーションである。

### 目的
- 紙文書やPDFのデジタル化を促進
- OCR結果の品質を人間とAIの協働により向上
- AIが活用しやすいマークダウン形式でのデータ蓄積

## ターゲットユーザー
- **主要ターゲット**: 個人ユーザー
- **ユースケース**:
  - 個人の書類や資料のデジタル化
  - 学習資料のテキスト化
  - 業務文書の個人的な整理

## 技術スタック

### プラットフォーム
- **デスクトップアプリケーション** (Electron等を想定)
- Windows/Mac/Linuxのクロスプラットフォーム対応

### OCRエンジン
- **Mistral OCR API**
- クラウドベースの高精度OCR処理

### AI機能
- OCR誤認識の自動修正
- マークダウンの構造化（見出し、リスト、表などの自動認識・整形）

## 主要機能

### 1. ファイル入力
- **対応フォーマット**:
  - PDF（複数ページ対応）
  - 画像（JPEG, PNG等、複数ファイル対応）

### 2. OCR処理
- Mistral OCR APIによるテキスト抽出
- 出力形式: マークダウン

### 3. 並列ビューア
- **左ペイン**: 元のファイル表示
  - PDFビューア機能
  - 画像ビューア機能
- **右ペイン**: OCR結果（マークダウン）表示・編集
- **同期機能**: ページ送り・ファイル送りの同期

### 4. ページ/ファイル送り機能
- **PDFの場合**:
  - ページ単位での表示・編集
  - ページごとのOCR結果確認
  - 前後ページへの移動
- **複数画像の場合**:
  - ファイル単位での表示・編集
  - ファイルごとのOCR結果確認
  - 前後ファイルへの移動

### 5. 編集機能
- **手動編集**:
  - マークダウンエディタでの直接編集
  - リアルタイムプレビュー
- **AI支援編集**:
  - OCR誤認識の自動修正提案・適用
  - マークダウン構造の自動整形
    - 見出しレベルの認識
    - リストの整形
    - 表の構造化

### 6. データ保存
- マークダウン形式での保存
- 元ファイルとの関連付け保持

## ユーザーフロー

1. **ファイル読み込み**
   - PDFまたは画像ファイルを選択・読み込み

2. **OCR処理実行**
   - Mistral OCR APIで自動処理
   - 進捗表示

3. **結果確認・編集**
   - 左: 元ファイル表示
   - 右: OCR結果表示
   - ページ/ファイル単位で確認

4. **AI支援編集（オプション）**
   - AI修正機能の実行
   - 修正提案の確認・適用

5. **手動編集（必要に応じて）**
   - マークダウンエディタで微調整

6. **保存**
   - マークダウンファイルとして保存

## 非機能要件

### パフォーマンス
- 大量ページのPDFでもスムーズなページ送り
- OCR処理の進捗表示

### ユーザビリティ
- シンプルで直感的なUI
- キーボードショートカット対応（ページ送りなど）

### セキュリティ
- APIキーの安全な保存
- ローカル処理を基本とし、OCRのみクラウド利用

## 将来的な拡張可能性

- バッチ処理機能
- 複数ファイルの一括OCR
- 出力フォーマットの拡張（HTML、DOCX等）
- オフラインOCRオプション（Tesseract等）
- クラウドストレージ連携

## 開発優先順位

### Phase 1 (MVP)
1. PDFと画像の読み込み
2. Mistral OCR APIとの連携
3. 基本的な並列ビューア
4. ページ/ファイル送り機能
5. 基本的なマークダウン編集
6. ファイル保存

### Phase 2
1. AI誤認識修正機能
2. マークダウン構造化機能
3. UI/UX改善
4. キーボードショートカット

### Phase 3
1. バッチ処理
2. 設定機能の充実
3. その他の拡張機能

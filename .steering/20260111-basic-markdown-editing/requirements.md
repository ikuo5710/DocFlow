# 要求内容

## 概要

MarkdownEditorコンポーネントに基本的なMarkdown編集機能（ツールバーとショートカット）を追加し、ユーザーがより効率的にMarkdownを編集できるようにする。

## 背景

現在のMarkdownEditorはCodeMirror 6を使用した基本的なテキスト編集機能のみを提供しています。OCR結果を編集する際に、見出し、太字、イタリック、リスト、リンクなどのMarkdown記法を手入力する必要があり、効率が悪い状況です。

基本的な書式設定ツールバーとキーボードショートカットを追加することで、ユーザーの編集効率を向上させます。

## 実装対象の機能

### 1. 書式設定ツールバー

エディタ上部にツールバーを追加し、以下のボタンを配置:

- **見出し** (H1, H2, H3): 選択行を見出しに変換
- **太字** (Bold): 選択テキストを太字に
- **イタリック** (Italic): 選択テキストを斜体に
- **取り消し線** (Strikethrough): 選択テキストに取り消し線
- **コード** (Code): インラインコードまたはコードブロック
- **リンク** (Link): 選択テキストをリンクに
- **番号なしリスト** (Bullet List): 行頭に`- `を追加
- **番号付きリスト** (Numbered List): 行頭に`1. `を追加
- **引用** (Quote): 行頭に`> `を追加

### 2. キーボードショートカット

| 操作 | ショートカット |
|------|---------------|
| 太字 | Ctrl/Cmd + B |
| イタリック | Ctrl/Cmd + I |
| コード | Ctrl/Cmd + ` |
| リンク | Ctrl/Cmd + K |
| 見出し1 | Ctrl/Cmd + 1 |
| 見出し2 | Ctrl/Cmd + 2 |
| 見出し3 | Ctrl/Cmd + 3 |

### 3. Undo/Redo機能の強化

- ツールバーにUndo/Redoボタンを追加
- 既存のCodeMirror historyを活用

## 受け入れ条件

### ツールバー

- [ ] ツールバーがエディタ上部に表示される
- [ ] 各ボタンにアイコンとツールチップが表示される
- [ ] ボタンクリックで対応する書式が適用される
- [ ] 選択範囲がない場合はカーソル位置に書式を挿入

### キーボードショートカット

- [ ] 各ショートカットが正しく動作する
- [ ] エディタにフォーカスがある時のみ有効

### Undo/Redo

- [ ] Undoボタンで直前の変更を取り消せる
- [ ] Redoボタンで取り消した変更を復元できる
- [ ] Ctrl+Z / Ctrl+Shift+Z が動作する

## 成功指標

- ツールバーのレスポンスが100ms以内
- ショートカットのレスポンスが50ms以内

## スコープ外

以下はこのフェーズでは実装しません:

- 画像挿入機能
- テーブル挿入機能
- プレビュー表示
- カスタムテーマ設定
- AIによる文章補正機能

## 参照ドキュメント

- `docs/functional-design.md` - 機能設計書
- `docs/architecture.md` - アーキテクチャ設計書
